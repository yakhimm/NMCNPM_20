<div class="container mb-5 position-relative">
    {{#each detail_recipe}}
    <div class="row">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item me-2"><a href="/">Trang chủ</a></li>
                <li class="me-2">
                    <ion-icon name="chevron-forward-outline"></ion-icon>
                </li>
                <li class="breadcrumb-item" aria-current="page">{{tenmon}}</li>
            </ol>
        </nav>
    </div>
    {{/each}}


    {{#if authenticated}}
    {{#each detail_recipe}}
    <button type="checkbox" id="favoriteButton" class="btn btn-danger position-absolute start-0" name="favorite"
        id="favorite" onclick="addToFavorite('{{tenmon}}')">
        <ion-icon class="text-white fs-3" name="heart-outline"></ion-icon>
    </button>
    {{/each}}
    {{/if}}

    {{#each detail_recipe}}
    <h1 class="text-center mt-4">{{tenmon}}</h1>

    <div class="text-center mt-3">
        <img src="{{image}}" alt="{{tenmon}}" title="{{tenmon}}" width="750px" height="550px" class="rounded-5">
    </div>

    <div class="col-10 mt-5 mx-auto">
        <h4 class="text-danger border-bottom border-2 mb-3">Nguyên liệu</h4>
        <a href="/ingredients/{{tenmon}}" class="order-ingredients fs-5">
            <ins>Đặt mua nguyên liệu</ins>
        </a>
        <ul>{{#each nguyenlieu}}
            <li>{{this}}</li>
            {{/each}}
        </ul>
    </div>

    <div class="col-10 mt-4 mx-auto">
        <h4 class="text-danger border-bottom border-2 mb-3">Sơ chế</h4>
        <ul>{{#each soche}}
            <li>{{this}}</li>
            {{/each}}
        </ul>
    </div>

    <div class="col-10 mt-4 mx-auto">
        <h4 class="text-danger border-bottom border-2 mb-3">Thực hiện</h4>
        <ul>{{#each thuchien}}
            <li>{{this}}</li>
            {{/each}}
        </ul>
    </div>

    <div class="col-10 mt-4 mx-auto">
        <h4 class="text-danger border-bottom border-2 mb-3">Cách dùng</h4>
        <ul>{{#each cachdung}}
            <li>{{this}}</li>
            {{/each}}
        </ul>
    </div>

    <div class="col-10 mt-4 mx-auto">
        <h4 class="text-danger border-bottom border-2 mb-3">Mách nhỏ</h4>
        <ul>{{#each machnho}}
            <li>{{this}}</li>
            {{/each}}
        </ul>
    </div>

    <div class="col-10 mt-4 mx-auto">
        <h4 class="text-danger border-bottom border-2 mb-3">Từ khóa</h4>
        <ul>{{#each tags}}
            <li>{{this}}</li>
            {{/each}}
        </ul>
    </div>
    {{/each}}
</div>

{{!-- comment and rating parts --}}

<div class="container">
    <div class="col-10 mt-4 mx-auto">
        <h4 class="text-danger border-bottom border-2">Bình luận</h4>

        {{!-- Rating --}}
        <div class="container d-flex justify-content-center my-3">
            <div class="col-md-12">
                <div class="stars">
                    <form class="col-12" action="">
                        <input class="star star-5" id="star-1" type="radio" name="star" />
                        <label class="star star-1" for="star-1"></label>

                        <input class="star star-2" id="star-2" type="radio" name="star" />
                        <label class="star star-2" for="star-2"></label>

                        <input class="star star-3" id="star-3" type="radio" name="star" />
                        <label class="star star-3" for="star-3"></label>

                        <input class="star star-4" id="star-4" type="radio" name="star" />
                        <label class="star star-4" for="star-4"></label>

                        <input class="star star-5" id="star-5" type="radio" name="star" />
                        <label class="star star-5" for="star-5"></label>
                    </form>
                </div>

            </div>

        </div>

        {{!-- comment --}}

        <section style="background-color: #eee;">
            <div class="container">
                <div class="row d-flex justify-content-center">
                    <div class="card p-0">
                        <div class="card-body">
                            <div class="d-flex flex-start align-items-center">
                                <img class="rounded-circle shadow-1-strong me-3"
                                    src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp" alt="avatar"
                                    width="60" height="60" />
                                <div>
                                    <h6 class="fw-bold text-primary mb-1">Lily Coleman</h6>
                                    <p class="text-muted small mb-0">
                                        Shared publicly - Jan 2020
                                    </p>
                                </div>
                            </div>

                            <p class="mt-3 mb-4 pb-2">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
                                tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                                quis nostrud exercitation ullamco laboris nisi ut aliquip consequat.
                            </p>

                            <div class="small d-flex justify-content-start">
                                <a href="#!" class="d-flex align-items-center me-3">
                                    <i class="far fa-thumbs-up me-2"></i>
                                    <p class="mb-0">Like</p>
                                </a>
                                <a href="#!" class="d-flex align-items-center me-3">
                                    <i class="far fa-comment-dots me-2"></i>
                                    <p class="mb-0">Comment</p>
                                </a>
                                <a href="#!" class="d-flex align-items-center me-3">
                                    <i class="fas fa-share me-2"></i>
                                    <p class="mb-0">Share</p>
                                </a>
                            </div>
                        </div>
                        <div class="card-footer py-3 border-0 " style="background-color: #f8f9fa;">
                            <div class="d-flex flex-start w-100">
                                <img class="rounded-circle shadow-1-strong me-3"
                                    src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp" alt="avatar"
                                    width="40" height="40" />
                                <div class="form-outline w-100">
                                    <textarea class="form-control" id="textAreaExample" rows="4"
                                        style="background: #fff;"></textarea>
                                    <label class="form-label" for="textAreaExample">Message</label>
                                </div>
                            </div>
                            <div class="float-end mt-2 pt-1">
                                <button type="button" class="btn btn-primary btn-sm shadow-none">Post comment</button>
                                <button type="button" class="btn btn-outline-primary btn-sm shadow-non">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<script>
    const addToFavorite = async (tenmon) => {
        const response = await fetch('http://localhost:3000/{{tenmon}}');
        const res = await fetch('http://localhost:3000/favorite', {
            method: 'post',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ tenmon })
        });
    }

</script>